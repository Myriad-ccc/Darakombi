<Window
    x:Class="Darakombi.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Darakombi"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="Darakombi"
    Width="1024"
    Height="868"
    Background="#0F0F0F"
    FontFamily="VCR OSD Mono"
    Foreground="White"
    Icon="Assets/Icon.ico"
    PreviewKeyDown="Window_PreviewKeyDown"
    KeyDown="Window_KeyDown"
    KeyUp="Window_KeyUp"
    ResizeMode="NoResize"
    SnapsToDevicePixels="True"
    UseLayoutRounding="True"
    WindowStartupLocation="CenterScreen"
    WindowStyle="None"
    mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="48" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid
            x:Name="TitleBar"
            Grid.Row="0"
            Background="#323232"
            MouseDown="TitleBar_MouseDown">
            <TextBlock
                x:Name="TitleTextShadow"
                Padding="5,5,0,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                MouseDown="TitleText_MouseDown"
                FontSize="40"
                Text="{Binding Title, RelativeSource={RelativeSource AncestorType=Window}}" />
            <TextBlock
                x:Name="TitleText"
                Padding="6,6,0,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                MouseDown="TitleText_MouseDown"
                FontSize="40"
                Text="{Binding Title, RelativeSource={RelativeSource AncestorType=Window}}" />

            <StackPanel
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Orientation="Horizontal">

                <Button
                    x:Name="BackButton"
                    Margin="2,0,0,0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Background="Transparent"
                    BorderThickness="2"
                    Click="BackButton_Click"
                    FontSize="48">
                    <Viewbox Width="48" Height="48">
                        <TextBlock
                            FontSize="48"
                            Foreground="#56D959"
                            Text="←"
                            TextAlignment="Center" />
                    </Viewbox>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>

                <Button
                    x:Name="ForwardButton"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Background="Transparent"
                    BorderThickness="2"
                    Click="ForwardButton_Click"
                    FontSize="48">
                    <Viewbox Width="48" Height="48">
                        <TextBlock
                            FontSize="48"
                            Foreground="#4CDAE4"
                            Text="→"
                            TextAlignment="Center" />
                    </Viewbox>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>

                <Button
                    x:Name="ClosingButton"
                    Margin="2,0,0,0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Background="Transparent"
                    BorderThickness="2"
                    Click="ClosingButton_Click"
                    FontSize="48">
                    <Viewbox Width="48" Height="48">
                        <TextBlock
                            FontSize="48"
                            Foreground="#b3251b"
                            Text="X"
                            TextAlignment="Center" />
                    </Viewbox>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </StackPanel>
        </Grid>

        <Grid
            x:Name="MainMenu"
            Grid.Row="1"
            ClipToBounds="True">

            <Canvas
                x:Name="GameCanvas"
                MouseDown="GameCanvas_MouseDown"
                MouseMove="GameCanvas_MouseMove"
                MouseUp="GameCanvas_MouseUp"
                MouseWheel="GameCanvas_MouseWheel"
                Visibility="Hidden">
                <Canvas.RenderTransform>
                    <TransformGroup>
                        <TranslateTransform x:Name="CameraTransform" X="0" Y="0" />
                        <ScaleTransform x:Name="CameraScale" ScaleX="1" ScaleY="1" />
                    </TransformGroup>
                </Canvas.RenderTransform>
            </Canvas>

            <Grid x:Name="StartMenu" Visibility="Visible">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">

                    <Button
                        x:Name="PlayButton"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="PlayButton_Click"
                        Content="Play"
                        FontSize="84"
                        Foreground="White">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <ContentPresenter />
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button
                        x:Name="EditorButton"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="EditorButton_Click"
                        Content="Editor"
                        FontSize="84"
                        Foreground="White">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <ContentPresenter />
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button
                        x:Name="MapButton"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="MapButton_Click"
                        Content="Map"
                        FontSize="84"
                        Foreground="LightPink">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <ContentPresenter />
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>
            </Grid>

            <Grid x:Name="MapMenu" Visibility="Hidden">
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="230" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="230" />
                </Grid.ColumnDefinitions>

                <TextBlock
                    Grid.Row="0"
                    Grid.Column="1"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    FontSize="82"
                    Text="Set map size" />

                <StackPanel
                    Grid.Row="1"
                    Grid.Column="1"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    Orientation="Vertical">
                    <TextBlock FontSize="64" Text="Width:" />
                    <TextBox
                        x:Name="MapWidthContent"
                        HorizontalAlignment="Center"
                        Background="Transparent"
                        BorderThickness="0"
                        FontSize="60"
                        Foreground="White"
                        TextChanged="MapWidthContent_TextChanged" />
                </StackPanel>
                <StackPanel
                    Grid.Row="1"
                    Grid.Column="1"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Orientation="Vertical">
                    <TextBlock FontSize="64" Text="Height:" />
                    <TextBox
                        x:Name="MapHeightContent"
                        HorizontalAlignment="Center"
                        Background="Transparent"
                        BorderThickness="0"
                        FontSize="60"
                        Foreground="White"
                        TextChanged="MapHeightContent_TextChanged" />
                </StackPanel>
                <StackPanel
                    Grid.Row="1"
                    Grid.Column="1"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Bottom"
                    Orientation="Vertical">
                    <Button
                        x:Name="ResetMapDimensions"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="ResetMapDimensions_Click"
                        Content="Reset"
                        FontSize="54"
                        Foreground="Orange" />
                    <Button
                        x:Name="SetMapSizeButton"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="SetMapSizeButton_Click"
                        Content="Set"
                        FontSize="54"
                        Foreground="LightGreen" />
                </StackPanel>
            </Grid>

            <Grid x:Name="GameMenu" Visibility="Hidden">
                <TextBlock
                    x:Name="EntityCounter"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    FontSize="32"
                    Foreground="White" />

                <Grid HorizontalAlignment="Left" VerticalAlignment="Bottom">
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Button
                        x:Name="GhostTitle"
                        Grid.Row="0"
                        Grid.Column="0"
                        HorizontalAlignment="Left"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="GhostTitle_Click"
                        Content="Ghost:"
                        FontSize="36"
                        Foreground="White">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <Button
                        x:Name="GhostBool"
                        Grid.Row="0"
                        Grid.Column="1"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="GhostTitle_Click"
                        Content="OFF"
                        FontSize="36"
                        Foreground="IndianRed">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button
                        x:Name="OverlayTitle"
                        Grid.Row="1"
                        Grid.Column="0"
                        HorizontalAlignment="Left"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="OverlayTitle_Click"
                        Content="Areas:"
                        FontSize="36"
                        Foreground="White">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <Button
                        x:Name="OverlayBool"
                        Grid.Row="1"
                        Grid.Column="1"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="OverlayTitle_Click"
                        Content="ON"
                        FontSize="36"
                        Foreground="LightGreen">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button
                        x:Name="GridTitle"
                        Grid.Row="2"
                        Grid.Column="0"
                        HorizontalAlignment="Left"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="GridTitle_Click"
                        Content="Grid:"
                        FontSize="36"
                        Foreground="White">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <Button
                        x:Name="GridBool"
                        Grid.Row="2"
                        Grid.Column="1"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="GridTitle_Click"
                        Content="ON"
                        FontSize="36"
                        Foreground="LightGreen">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </Grid>

            </Grid>

            <Grid x:Name="EditorMenu" Visibility="Hidden">

                <Button
                    x:Name="EditorSave"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Background="Transparent"
                    BorderThickness="0"
                    Click="EditorSave_Click"
                    Content="Save"
                    FontSize="50"
                    Foreground="White">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </ControlTemplate>
                    </Button.Template>
                </Button>

                <StackPanel
                    x:Name="EditorOverlay"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Bottom"
                    Orientation="Vertical">

                    <StackPanel HorizontalAlignment="Left" VerticalAlignment="Bottom">
                        <StackPanel>
                            <TextBlock
                                FontSize="32"
                                Foreground="IndianRed"
                                Text="Red" />

                            <StackPanel Orientation="Horizontal">
                                <Slider
                                    x:Name="RedSlider"
                                    Width="100"
                                    Height="20"
                                    Maximum="255"
                                    Minimum="0"
                                    SmallChange="1"
                                    ValueChanged="RedSlider_ValueChanged"
                                    Value="255" />

                                <TextBlock
                                    x:Name="RedSliderText"
                                    Margin="8,0,0,0"
                                    FontSize="32"
                                    Text="{Binding ElementName=RedSlider, Path=Value, StringFormat=N0}" />
                            </StackPanel>
                        </StackPanel>

                        <StackPanel>
                            <TextBlock
                                FontSize="32"
                                Foreground="LightGreen"
                                Text="Green" />

                            <StackPanel Orientation="Horizontal">
                                <Slider
                                    x:Name="GreenSlider"
                                    Width="100"
                                    Height="20"
                                    Maximum="255"
                                    Minimum="0"
                                    SmallChange="1"
                                    ValueChanged="GreenSlider_ValueChanged"
                                    Value="255" />

                                <TextBlock
                                    x:Name="GreenSliderText"
                                    Margin="8,0,0,0"
                                    FontSize="32"
                                    Text="{Binding ElementName=GreenSlider, Path=Value, StringFormat=N0}" />
                            </StackPanel>
                        </StackPanel>

                        <StackPanel>
                            <TextBlock
                                FontSize="32"
                                Foreground="SkyBlue"
                                Text="Blue" />

                            <StackPanel Orientation="Horizontal">
                                <Slider
                                    x:Name="BlueSlider"
                                    Width="100"
                                    Height="20"
                                    Maximum="255"
                                    Minimum="0"
                                    SmallChange="1"
                                    ValueChanged="BlueSlider_ValueChanged"
                                    Value="255" />

                                <TextBlock
                                    x:Name="BlueSliderText"
                                    Margin="8,0,0,0"
                                    FontSize="32"
                                    Text="{Binding ElementName=BlueSlider, Path=Value, StringFormat=N0}" />
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal">
                        <Button
                            x:Name="DrawOverTitle"
                            HorizontalAlignment="Left"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="DrawOverTitle_Click"
                            Content="DrOv:"
                            FontSize="36"
                            Foreground="White">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                        <Button
                            x:Name="DrawOverBool"
                            HorizontalAlignment="Left"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="DrawOverTitle_Click"
                            Content="OFF"
                            FontSize="36"
                            Foreground="IndianRed">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal">
                        <Button
                            x:Name="EditorGridTitle"
                            HorizontalAlignment="Left"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="EditorGridTitle_Click"
                            Content="Grid:"
                            FontSize="36"
                            Foreground="White">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                        <Button
                            x:Name="EditorGridBool"
                            HorizontalAlignment="Left"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="EditorGridTitle_Click"
                            Content="ON"
                            FontSize="36"
                            Foreground="LightGreen">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </StackPanel>
                </StackPanel>

            </Grid>

            <TextBlock
                x:Name="DebugText"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                FontSize="32"
                Foreground="White" 
                />
        </Grid>
    </Grid>
</Window>